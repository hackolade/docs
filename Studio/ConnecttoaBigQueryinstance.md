# Connect to a BigQuery instance

To access a Google BigQuery project, Hackolade Studio currently supports access using two methods, [Application Default Credentials](<https://cloud.google.com/docs/authentication/set-up-adc-local-dev-environment>) and [Service account](<https://cloud.google.com/iam/docs/service-account-overview>).

Choosing the most appropriate method depends on the use case.

If you want to connect from your local workstation, then you should favor using **Application Default Credentials** method because it allows for better auditing and access management, as you will be authenticated as a user (e.g. yourself) to Google Cloud Platform.

While if your use case implies running the Hackolade Studio [Command-Line Interface](<CommandLineInterface.md>) on servers (for instance using Docker), then you should favor using the **Service Account** because this method is tailored for **Machine-to-Machine** use cases.

The Hackolade process for reverse-engineering of Google BigQuery datasets includes the execution of SQL statements to discover datasets, tables and views, columns and their data types.&nbsp;

&nbsp;

## Application Default Credentials

ADC are created by the [gcloud CLI](<https://cloud.google.com/sdk/gcloud> "target=\"\_blank\"") client on your workstation.

### Instructions to setup ADC on your local workstation

As stated by [Google Cloud Platform's documentation](<https://cloud.google.com/docs/authentication/set-up-adc-local-dev-environment> "target=\"\_blank\""):

1. Install [gcloud](<https://cloud.google.com/sdk/docs/install>) CLI client on your workstation
1. If not performed by the last step of the installer, go to a terminal prompt and initialize gcloud: *gcloud init*
1. And finally authenticate yourself to GCP: *gcloud auth application-default login*

Following [GCP instructions](<https://cloud.google.com/docs/authentication/application-default-credentials> "target=\"\_blank\""), you should get redirected to your browser so you can authenticate yourself:

![GCP App Default Credentials authentication](<lib/GCP App Default Credentials authentication.png>)

&nbsp;

If successful, you should be getting this confirmation:

![GCP App Default Credentials confirmation](<lib/GCP App Default Credentials confirmation.png>)

&nbsp;

Gcloud creates an **application\_default\_credentials.json** credentials file in the following location depending on your operating system:

* Windows: *%appdata%\\gcloud\\application\_default\_credentials.json*

or in *%userprofile%\\Appdata\\Roaming\\gcloud\\legacy\_credentials\\\<your GCP identifier\>\\adc.json*

* Mac: *${HOME}/.config/gcloud/application\_default\_credentials.json*
* Linux: *${HOME}/.config/gcloud/application\_default\_credentials.json*

Note that on Mac and Linux, this location is in a hidden folder. On Mac to be able to select a hidden folder in a file picker, you might need to use the **CMD + SHIFT + .** keyboard shortcut for MacOS to show them in the picker first. On Linux all folders are displayed.

&nbsp;

### Create the Hackolade Studio connection settings

Give a meaningful name to the connection, and provide the mandatory Project ID.

Also reference the path and name of the credentials path and file generated by **gcloud**.

![BigQuery connection settings - default credentials](<lib/BigQuery connection settings - dflt credentia.png>)

&nbsp;

&nbsp;

## Service Account

### Instructions to create a Service Account key file

Credentials are loaded from a file created in the [Google IAM \& Admin console](<https://console.cloud.google.com/iam-admin/iam> "target=\"\_blank\"") by your administrator.

&nbsp;

Here are the steps to follow:

&#49;) go to the IAM console, and choose [Service Accounts](<https://console.cloud.google.com/projectselector2/iam-admin/serviceaccounts?supportedpurview=project> "target=\"\_blank\"") in the menu

&#50;) select an existing project, and press the button + Create a Service Account

&#51;) provide the service account details, and create

&#52;) grant the following service account access to the project:

&nbsp; &nbsp; - BigQuery Data Viewer: in order to be able to perform reverse-engineering

and

&nbsp; &nbsp; - BigQuery Data Editor: in order to be able to forward-engineer (apply SQL script to instance)

&nbsp; &nbsp; - BigQuery Job User: in order to be able to forward-engineer (apply SQL script to instance)

![Image](<lib/BigQuery Service Account role creation.png>)

&nbsp;

then save the role

&#53;) select the action Manage Keys for the service account:

![BigQuery Service Account key creation](<lib/BigQuery Service Account key creation.png>)

&nbsp;

and create a new key with JSON type.&nbsp; The .json file gets downloaded in the browser.

&nbsp;

&nbsp;

### Create the Hackolade Studio connection settings

Give a meaningful name to the connection, optionally provide a specific project id, and reference the path and name of the key file provided by your administrator.

&nbsp;

The key file must be referenced in the connection settings dialog.

![Image](<lib/BigQuery connection settings - service accoun.png>)

&nbsp;

